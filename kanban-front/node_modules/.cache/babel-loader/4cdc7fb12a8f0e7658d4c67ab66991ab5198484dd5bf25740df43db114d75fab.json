{"ast":null,"code":"// src/Components/Editabled/Editable.js\nimport React,{useState,useRef,useEffect,forwardRef,useImperativeHandle}from\"react\";import{SquarePen}from\"lucide-react\";import\"./Editable.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Editable=/*#__PURE__*/forwardRef((_ref,ref)=>{let{text=\"\",defaultValue=\"\",placeholder=\"\",onSubmit,shortLine=false}=_ref;const[value,setValue]=useState(defaultValue||text||\"\");const[isEditing,setIsEditing]=useState(false);const containerRef=useRef(null);const inputRef=useRef(null);// клики вне — завершаем редактирование\nuseEffect(()=>{function handleClickOutside(e){if(isEditing&&containerRef.current&&!containerRef.current.contains(e.target)){finishEdit();}}document.addEventListener(\"mousedown\",handleClickOutside);return()=>document.removeEventListener(\"mousedown\",handleClickOutside);},[isEditing]);// при входе в режим редактирования — фокус и курсор в конец\nuseEffect(()=>{if(isEditing&&inputRef.current){inputRef.current.focus();const len=inputRef.current.value.length;inputRef.current.setSelectionRange(len,len);}},[isEditing]);// делегируем методы наружу\nuseImperativeHandle(ref,()=>({focus:()=>{setIsEditing(true);// фокус после переключения\nsetTimeout(()=>{var _inputRef$current;return(_inputRef$current=inputRef.current)===null||_inputRef$current===void 0?void 0:_inputRef$current.focus();},0);},clear:()=>{setValue(\"\");if(inputRef.current)inputRef.current.value=\"\";},get value(){return value;},set value(v){setValue(v);if(inputRef.current)inputRef.current.value=v;}}),[value]);const startEdit=e=>{e.stopPropagation();setIsEditing(true);};const finishEdit=()=>{setIsEditing(false);onSubmit&&onSubmit(value.trim());};const handleKeyDown=e=>{if(e.key===\"Enter\"){e.preventDefault();finishEdit();}};return/*#__PURE__*/_jsxs(\"div\",{className:`editable_line ${shortLine?\"short\":\"\"}`,ref:containerRef,onClick:!isEditing?startEdit:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(SquarePen,{className:\"editable_icon\"}),!isEditing?/*#__PURE__*/_jsx(\"span\",{className:`editable_text ${!value?\"placeholder\":\"\"}`,children:value||placeholder}):/*#__PURE__*/_jsx(\"input\",{ref:inputRef,type:\"text\",className:`editable_input ${shortLine?\"short\":\"\"}`,value:value,onChange:e=>setValue(e.target.value),onBlur:finishEdit,onKeyDown:handleKeyDown,placeholder:placeholder})]});});export default Editable;","map":{"version":3,"names":["React","useState","useRef","useEffect","forwardRef","useImperativeHandle","SquarePen","jsx","_jsx","jsxs","_jsxs","Editable","_ref","ref","text","defaultValue","placeholder","onSubmit","shortLine","value","setValue","isEditing","setIsEditing","containerRef","inputRef","handleClickOutside","e","current","contains","target","finishEdit","document","addEventListener","removeEventListener","focus","len","length","setSelectionRange","setTimeout","_inputRef$current","clear","v","startEdit","stopPropagation","trim","handleKeyDown","key","preventDefault","className","onClick","children","type","onChange","onBlur","onKeyDown"],"sources":["C:/Users/aleks/Desktop/kanbanapp/kanban-front/src/Components/Editabled/Editable.js"],"sourcesContent":["// src/Components/Editabled/Editable.js\nimport React, {\n  useState,\n  useRef,\n  useEffect,\n  forwardRef,\n  useImperativeHandle\n} from \"react\";\nimport { SquarePen } from \"lucide-react\";\nimport \"./Editable.css\";\n\nconst Editable = forwardRef(({\n  text = \"\",\n  defaultValue = \"\",\n  placeholder = \"\",\n  onSubmit,\n  shortLine = false,\n}, ref) => {\n  const [value, setValue] = useState(defaultValue || text || \"\");\n  const [isEditing, setIsEditing] = useState(false);\n  const containerRef = useRef(null);\n  const inputRef = useRef(null);\n\n  // клики вне — завершаем редактирование\n  useEffect(() => {\n    function handleClickOutside(e) {\n      if (\n        isEditing &&\n        containerRef.current &&\n        !containerRef.current.contains(e.target)\n      ) {\n        finishEdit();\n      }\n    }\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\n  }, [isEditing]);\n\n  // при входе в режим редактирования — фокус и курсор в конец\n  useEffect(() => {\n    if (isEditing && inputRef.current) {\n      inputRef.current.focus();\n      const len = inputRef.current.value.length;\n      inputRef.current.setSelectionRange(len, len);\n    }\n  }, [isEditing]);\n\n  // делегируем методы наружу\n  useImperativeHandle(ref, () => ({\n    focus: () => {\n      setIsEditing(true);\n      // фокус после переключения\n      setTimeout(() => inputRef.current?.focus(), 0);\n    },\n    clear: () => {\n      setValue(\"\");\n      if (inputRef.current) inputRef.current.value = \"\";\n    },\n    get value() {\n      return value;\n    },\n    set value(v) {\n      setValue(v);\n      if (inputRef.current) inputRef.current.value = v;\n    }\n  }), [value]);\n\n  const startEdit = e => {\n    e.stopPropagation();\n    setIsEditing(true);\n  };\n\n  const finishEdit = () => {\n    setIsEditing(false);\n    onSubmit && onSubmit(value.trim());\n  };\n\n  const handleKeyDown = e => {\n    if (e.key === \"Enter\") {\n      e.preventDefault();\n      finishEdit();\n    }\n  };\n\n  return (\n    <div\n      className={`editable_line ${shortLine ? \"short\" : \"\"}`}\n      ref={containerRef}\n      onClick={!isEditing ? startEdit : e => e.stopPropagation()}\n    >\n      <SquarePen className=\"editable_icon\" />\n\n      {!isEditing ? (\n        <span className={`editable_text ${!value ? \"placeholder\" : \"\"}`}>\n          {value || placeholder}\n        </span>\n      ) : (\n        <input\n          ref={inputRef}\n          type=\"text\"\n          className={`editable_input ${shortLine ? \"short\" : \"\"}`}\n          value={value}\n          onChange={e => setValue(e.target.value)}\n          onBlur={finishEdit}\n          onKeyDown={handleKeyDown}\n          placeholder={placeholder}\n        />\n      )}\n    </div>\n  );\n});\n\nexport default Editable;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}