{"ast":null,"code":"// src/Components/Card/Card.js\nimport React,{useState}from\"react\";import{Draggable}from\"react-beautiful-dnd\";import{Grip,Calendar,ListChecks}from\"lucide-react\";import CardInfo from\"./CardInfo/CardInfo\";import\"./Card.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Card(props){const[showModal,setShowModal]=useState(false);const[showMenu,setShowMenu]=useState(false);const{id,title,labels,date,tasks}=props.card;const tasksCount=(tasks===null||tasks===void 0?void 0:tasks.length)||0;const tasksCompleted=(tasks===null||tasks===void 0?void 0:tasks.filter(t=>t.completed).length)||0;const progress=tasksCount>0?Math.round(tasksCompleted/tasksCount*100):0;let progressColor=\"#e74c3c\";// <33% — красный\nif(progress>=33&&progress<=50){progressColor=\"#f1c40f\";// 33–50% — жёлтый\n}else if(progress>50&&progress<100){progressColor=\"#3498db\";// 51–99% — синий\n}else if(progress===100){progressColor=\"#2ecc71\";// 100% — зелёный\n}// Русское форматирование даты\nconst formatDateRU=value=>{if(!value)return\"\";const d=new Date(value);if(isNaN(d))return value;return new Intl.DateTimeFormat(\"ru-RU\",{day:\"numeric\",month:\"long\",year:\"numeric\"}).format(d);};const handleDelete=()=>{props.removeCard(props.boardId,id);setShowMenu(false);};return/*#__PURE__*/_jsxs(_Fragment,{children:[showModal&&/*#__PURE__*/_jsx(CardInfo,{onClose:()=>setShowModal(false),card:props.card,boardId:props.boardId,updateCard:props.updateCard}),/*#__PURE__*/_jsx(Draggable,{draggableId:id,index:props.index,children:(provided,snapshot)=>/*#__PURE__*/_jsxs(\"div\",{className:`card ${snapshot.isDragging?\"dragging\":\"\"}`,ref:provided.innerRef,...provided.draggableProps,...provided.dragHandleProps,onClick:()=>setShowModal(true),onMouseLeave:()=>setShowMenu(false),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card_header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card_header_labels\",children:labels===null||labels===void 0?void 0:labels.map((lab,i)=>/*#__PURE__*/_jsx(\"span\",{className:\"card_label\",style:{color:`var(--${lab.color}-700)`,backgroundColor:`var(--${lab.color}-300)`},children:lab.text},i))}),/*#__PURE__*/_jsxs(\"div\",{className:\"card_more_wrapper\",children:[/*#__PURE__*/_jsx(Grip,{size:20,className:\"card_more_icon\",onClick:e=>{e.stopPropagation();setShowMenu(v=>!v);}}),showMenu&&/*#__PURE__*/_jsx(\"div\",{className:\"card_menu\",children:/*#__PURE__*/_jsx(\"button\",{className:\"card_menu_item\",onClick:handleDelete,children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u043A\\u0430\\u0440\\u0442\\u043E\\u0447\\u043A\\u0443\"})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card_title\",children:title||\"Без названия\"}),date&&/*#__PURE__*/_jsxs(\"div\",{className:\"card_due-date\",children:[/*#__PURE__*/_jsx(Calendar,{size:14,style:{marginRight:4}}),formatDateRU(date)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card_progress\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card_progress_text\",children:[/*#__PURE__*/_jsx(ListChecks,{size:14,style:{marginRight:4}}),/*#__PURE__*/_jsxs(\"span\",{children:[tasksCompleted,\"/\",tasksCount]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card_progress_bar\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card_progress_fill\",style:{width:`${progress}%`,backgroundColor:progressColor}})})]})]})})]});}export default Card;","map":{"version":3,"names":["React","useState","Draggable","Grip","Calendar","ListChecks","CardInfo","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Card","props","showModal","setShowModal","showMenu","setShowMenu","id","title","labels","date","tasks","card","tasksCount","length","tasksCompleted","filter","t","completed","progress","Math","round","progressColor","formatDateRU","value","d","Date","isNaN","Intl","DateTimeFormat","day","month","year","format","handleDelete","removeCard","boardId","children","onClose","updateCard","draggableId","index","provided","snapshot","className","isDragging","ref","innerRef","draggableProps","dragHandleProps","onClick","onMouseLeave","map","lab","i","style","color","backgroundColor","text","size","e","stopPropagation","v","marginRight","width"],"sources":["C:/Users/aleks/Desktop/kanbanapp/kanban-front/src/Components/Card/Card.js"],"sourcesContent":["// src/Components/Card/Card.js\nimport React, { useState } from \"react\";\nimport { Draggable } from \"react-beautiful-dnd\";\nimport { Grip, Calendar, ListChecks } from \"lucide-react\";\nimport CardInfo from \"./CardInfo/CardInfo\";\nimport \"./Card.css\";\n\nfunction Card(props) {\n  const [showModal, setShowModal] = useState(false);\n  const [showMenu, setShowMenu] = useState(false);\n\n  const { id, title, labels, date, tasks } = props.card;\n\n  const tasksCount = tasks?.length || 0;\n  const tasksCompleted = tasks?.filter((t) => t.completed).length || 0;\n  const progress =\n    tasksCount > 0 ? Math.round((tasksCompleted / tasksCount) * 100) : 0;\n\nlet progressColor = \"#e74c3c\"; // <33% — красный\nif (progress >= 33 && progress <= 50) {\n  progressColor = \"#f1c40f\";   // 33–50% — жёлтый\n} else if (progress > 50 && progress < 100) {\n  progressColor = \"#3498db\";   // 51–99% — синий\n} else if (progress === 100) {\n  progressColor = \"#2ecc71\";   // 100% — зелёный\n}\n\n\n  // Русское форматирование даты\n  const formatDateRU = (value) => {\n    if (!value) return \"\";\n    const d = new Date(value);\n    if (isNaN(d)) return value;\n    return new Intl.DateTimeFormat(\"ru-RU\", {\n      day: \"numeric\",\n      month: \"long\",\n      year: \"numeric\",\n    }).format(d);\n  };\n\n  const handleDelete = () => {\n    props.removeCard(props.boardId, id);\n    setShowMenu(false);\n  };\n\n  return (\n    <>\n      {showModal && (\n        <CardInfo\n          onClose={() => setShowModal(false)}\n          card={props.card}\n          boardId={props.boardId}\n          updateCard={props.updateCard}\n        />\n      )}\n\n      <Draggable draggableId={id} index={props.index}>\n        {(provided, snapshot) => (\n          <div\n            className={`card ${snapshot.isDragging ? \"dragging\" : \"\"}`}\n            ref={provided.innerRef}\n            {...provided.draggableProps}\n            {...provided.dragHandleProps}\n            onClick={() => setShowModal(true)}\n            onMouseLeave={() => setShowMenu(false)}\n          >\n            <div className=\"card_header\">\n              <div className=\"card_header_labels\">\n                {labels?.map((lab, i) => (\n                  <span\n                    key={i}\n                    className=\"card_label\"\n                    style={{\n                      color: `var(--${lab.color}-700)`,\n                      backgroundColor: `var(--${lab.color}-300)`,\n                    }}\n                  >\n                    {lab.text}\n                  </span>\n                ))}\n              </div>\n\n              <div className=\"card_more_wrapper\">\n                <Grip\n                  size={20}\n                  className=\"card_more_icon\"\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    setShowMenu((v) => !v);\n                  }}\n                />\n                {showMenu && (\n                  <div className=\"card_menu\">\n                    <button className=\"card_menu_item\" onClick={handleDelete}>\n                      Удалить карточку\n                    </button>\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div className=\"card_title\">{title || \"Без названия\"}</div>\n\n            {date && (\n              <div className=\"card_due-date\">\n                <Calendar size={14} style={{ marginRight: 4 }} />\n                {formatDateRU(date)}\n              </div>\n            )}\n\n            <div className=\"card_progress\">\n              <div className=\"card_progress_text\">\n                <ListChecks size={14} style={{ marginRight: 4 }} />\n                <span>\n                  {tasksCompleted}/{tasksCount}\n                </span>\n              </div>\n              <div className=\"card_progress_bar\">\n                <div\n                  className=\"card_progress_fill\"\n                  style={{\n                    width: `${progress}%`,\n                    backgroundColor: progressColor,\n                  }}\n                />\n              </div>\n            </div>\n          </div>\n        )}\n      </Draggable>\n    </>\n  );\n}\n\nexport default Card;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}